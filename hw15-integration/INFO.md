# Spring-integration. Библиотека

## Процесс отдачи книг от пользователя
* Человек приносит книги
    + LibrarianServiceImpl - метод, где генерируется массив имен людей 
        и книг которые они приносят. BooksFromHuman и Book.
    + Book имеет поля: 
      title - название, 
      damageLevel - уровень повреждения (на этапе принесения книги null, т.к. оценить может только помощник библиотекаря)
      worth - уровень ценности книги (от 0 до 1)
      isDamaged - признак того что книга повреждена
* Принесенные книги попадают в канал receivedBooksChannel и обрабатываются libraryBookFlow
    + массив книг разбивается и обрабатывается по одной (split())
    + записывается в журнал поступившая книга (log)
    + если книга не имеет повреждений - помощник помещает её на полку (putBookOnShelf)
    + если книга имеет повреждения то, отправляется дальше по каналу
    + помощник библиотекаря (AssistantLibrarianService) производит оценку уровня повреждения книги (checkBooksForDamage)
    + книги поступают книжному мастеру по ремонту (RepairmanBookService).
    Он оценивает цену затрат на ремонт книги с учетом её ценности (estimateBookRepair).
    Если книга не ремонтопригодна, то отправляет её на утилизацию.
    + После происходит aggregate по оценке затрат на ремонт книг
    + Оценивается сумма понесенных затрат на ремонт книги
    + + если она превышает 100, то отправляется в канал seriousDamageChannel, где помимо штрафа
        выноситься пометка о предупреждении
* Итогом будет значение штрафа для каждого из людей принесших книги и предупреждения особо злостных
нарушителей
